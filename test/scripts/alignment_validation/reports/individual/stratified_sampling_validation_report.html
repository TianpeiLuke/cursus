<!DOCTYPE html>
<html>
<head>
    <title>Alignment Validation Report - stratified_sampling</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .header { background-color: #f0f0f0; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .summary { display: flex; justify-content: space-around; margin: 20px 0; }
        .metric { text-align: center; padding: 15px; background-color: #f8f9fa; border-radius: 5px; }
        .metric h3 { margin: 0; font-size: 2em; }
        .metric p { margin: 5px 0; color: #666; }
        .passing { color: #28a745; }
        .failing { color: #dc3545; }
        .warning { color: #ffc107; }
        .level-section { margin: 20px 0; border: 1px solid #ddd; border-radius: 5px; }
        .level-header { background-color: #e9ecef; padding: 15px; font-weight: bold; font-size: 1.2em; }
        .test-result { padding: 15px; border-bottom: 1px solid #eee; }
        .test-passed { border-left: 4px solid #28a745; }
        .test-failed { border-left: 4px solid #dc3545; }
        .issue { margin: 10px 0; padding: 10px; background-color: #f8f9fa; border-radius: 3px; }
        .critical { border-left: 4px solid #dc3545; background-color: #f8d7da; }
        .error { border-left: 4px solid #fd7e14; background-color: #fff3cd; }
        .warning { border-left: 4px solid #ffc107; background-color: #fff3cd; }
        .info { border-left: 4px solid #17a2b8; background-color: #d1ecf1; }
        .metadata { margin: 20px 0; padding: 15px; background-color: #f8f9fa; border-radius: 5px; }
        .footer { margin-top: 30px; padding: 15px; background-color: #e9ecef; border-radius: 5px; text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” Alignment Validation Report</h1>
        <h2>Script: stratified_sampling</h2>
        <p><strong>Generated:</strong> 2025-09-28T10:07:57.949315</p>
        <p><strong>Overall Status:</strong> <span class="passing">PASSING</span></p>
    </div>
    
    <div class="summary">
        <div class="metric">
            <h3>24</h3>
            <p>Total Issues</p>
        </div>
        <div class="metric">
            <h3>0</h3>
            <p>Critical Issues</p>
        </div>
        <div class="metric">
            <h3>0</h3>
            <p>Error Issues</p>
        </div>
        <div class="metric">
            <h3>5</h3>
            <p>Warning Issues</p>
        </div>
    </div>
    
    <div class="level-section">
        <div class="level-header">ğŸ“‹ Alignment Validation Results</div>
        
        <div class="test-result test-passed">
            <h4>Level 1: Script â†” Contract</h4>
            <p>Status: PASSED</p>
            <p>Issues Found: 18</p>
            
            <div class="issue warning">
                <strong>WARNING [environment_variables]:</strong> Optional environment variable accessed without default: VARIANCE_COLUMN
                <br><em>ğŸ’¡ Recommendation: Provide default value when accessing optional variable VARIANCE_COLUMN</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [arguments]:</strong> Script defines config-driven argument provided by builder: --job-type (accessed as args.job_type)
                <br><em>ğŸ’¡ Recommendation: Argument --job-type is provided by builder - no action needed</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_compliance]:</strong> Main function follows testability pattern with all required parameters
                <br><em>ğŸ’¡ Recommendation: No action needed - script follows testability best practices</em>
            </div>
            
            <div class="issue warning">
                <strong>WARNING [testability_env_access]:</strong> Helper functions use direct environment access - consider parameter passing
                <br><em>ğŸ’¡ Recommendation: Pass environment variables as parameters to helper functions instead of direct access</em>
            </div>
            
            <div class="issue warning">
                <strong>WARNING [testability_entry_point]:</strong> Main function expects environ_vars parameter but no environment collection found in entry point
                <br><em>ğŸ’¡ Recommendation: Add environment variable collection in __main__ block to pass to main function</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for job_args
                <br><em>ğŸ’¡ Recommendation: Use job_args['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for environ_vars
                <br><em>ğŸ’¡ Recommendation: Use environ_vars['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for input_paths
                <br><em>ğŸ’¡ Recommendation: Use input_paths['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for output_paths
                <br><em>ğŸ’¡ Recommendation: Use output_paths['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_parameter_access]:</strong> Consider using dictionary-style access for job_args
                <br><em>ğŸ’¡ Recommendation: Use job_args['key'] for accessing nested values</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [testability_container_support]:</strong> No container detection found - consider adding hybrid mode support
                <br><em>ğŸ’¡ Recommendation: Add container detection to support both local and container execution</em>
            </div>
            
            <div class="issue warning">
                <strong>WARNING [testability_helper_functions]:</strong> Helper function 'None' accesses environment directly
                <br><em>ğŸ’¡ Recommendation: Refactor 'None' to accept environment variables as parameters</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [framework_detected]:</strong> Processing script uses sklearn framework
                <br><em>ğŸ’¡ Recommendation: Ensure sklearn dependencies are properly specified</em>
            </div>
            
        </div>
        
        <div class="test-result test-passed">
            <h4>Level 2: Contract â†” Specification</h4>
            <p>Status: PASSED</p>
            <p>Issues Found: 4</p>
            
            <div class="issue info">
                <strong>INFO [multi_variant_validation]:</strong> Smart Specification Selection: validated against 5 variants
                <br><em>ğŸ’¡ Recommendation: Multi-variant validation completed successfully</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [step_type_resolution]:</strong> Step type resolved via registry: StratifiedSampling_Training -> StratifiedSampling -> Processing
                <br><em>ğŸ’¡ Recommendation: Using Processing step property paths for validation</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [property_path_validation]:</strong> Valid property path in output processed_data: properties.ProcessingOutputConfig.Outputs['processed_data'].S3Output.S3Uri
                <br><em>ğŸ’¡ Recommendation: Property path is correctly formatted for the step type</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [property_path_validation_summary]:</strong> Property path validation completed for stratified_sampling_contract
                <br><em>ğŸ’¡ Recommendation: Validated 1/1 outputs with property paths against SageMaker documentation</em>
            </div>
            
        </div>
        
        <div class="test-result test-passed">
            <h4>Level 3: Specification â†” Dependencies</h4>
            <p>Status: PASSED</p>
            <p>Issues Found: 0</p>
            
        </div>
        
        <div class="test-result test-passed">
            <h4>Level 4: Builder â†” Configuration</h4>
            <p>Status: PASSED</p>
            <p>Issues Found: 2</p>
            
            <div class="issue warning">
                <strong>WARNING [configuration_fields]:</strong> Required configuration field not accessed in builder: project_root_folder
                <br><em>ğŸ’¡ Recommendation: Access required field project_root_folder in builder or make it optional</em>
            </div>
            
            <div class="issue info">
                <strong>INFO [required_field_validation]:</strong> Builder has required fields but no explicit validation logic detected
                <br><em>ğŸ’¡ Recommendation: Consider adding explicit validation logic for required configuration fields</em>
            </div>
            
        </div>
        
    </div>
    
    <div class="metadata">
        <h3>ğŸ“„ Metadata</h3>
        <p><strong>Script Path:</strong> /Users/tianpeixie/github_workspace/cursus/src/cursus/steps/scripts/stratified_sampling.py</p>
        <p><strong>Validation Timestamp:</strong> 2025-09-28T10:07:57.949315</p>
        <p><strong>Validator Version:</strong> 1.0.0</p>
    </div>
    
    <div class="footer">
        <p>Generated by Cursus Alignment Validation System</p>
    </div>
</body>
</html>